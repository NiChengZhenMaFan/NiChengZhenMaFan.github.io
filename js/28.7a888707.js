"use strict";(self["webpackChunkjd"]=self["webpackChunkjd"]||[]).push([[28],{1150:function(t,e,_){_.d(e,{Z:function(){return u}});var a=_(3396),c=_(7139);const i={class:"shopInfo__item"},n={class:"shopInfo__item__left"},s=["src"],o={class:"shopInfo__item__right__title"},r={class:"shopInfo__item__right__tags"},l={class:"shopInfo__item__right__notice"};function m(t,e,_,m,d,h){return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",n,[(0,a._)("img",{src:_.item.imgUrl,alt:"",class:"shopInfo__item__left__img"},null,8,s)]),(0,a._)("div",{class:(0,c.C_)({shopInfo__item__right:!0,shopInfo__item__right__border:_.showBorder})},[(0,a._)("div",o,(0,c.zw)(_.item.title),1),(0,a._)("div",r,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(_.item.tags,((t,e)=>((0,a.wg)(),(0,a.iD)("span",{key:e,class:"shopInfo__item__right__tags__item"},(0,c.zw)(t),1)))),128))]),(0,a._)("div",l,(0,c.zw)(_.item.notice),1)],2)])}var d={name:"ShopInfo",props:["item","showBorder"]},h=_(89);const p=(0,h.Z)(d,[["render",m],["__scopeId","data-v-c686290c"]]);var u=p},1028:function(t,e,_){_.r(e),_.d(e,{default:function(){return vt}});var a=_(3396);const c={class:"container"};function i(t,e,_,i,n,s){const o=(0,a.up)("shop-header"),r=(0,a.up)("shop-content"),l=(0,a.up)("shop-cart");return(0,a.wg)(),(0,a.iD)("div",c,[(0,a.Wm)(o,{onCastItem:s.getItem},null,8,["onCastItem"]),(0,a.Wm)(r,{shopName:n.title},null,8,["shopName"]),(0,a.Wm)(l,{shopName:n.title},null,8,["shopName"])])}var n=_(7139),s=_(9242);const o=t=>((0,a.dD)("data-v-3e60d268"),t=t(),(0,a.Cn)(),t),r={class:"cart"},l={class:"cart__detail"},m={key:0,class:"cart__detail__title"},d=o((()=>(0,a._)("span",{class:"cart__detail__title__left"},"全选",-1))),h={key:1,class:"cart__detail__list"},p=["onClick"],u=["onClick"],g=["src"],I={class:"cart__detail__list__item__text"},C={class:"cart__detail__list__item__text__title"},k={class:"cart__detail__list__item__text__pirce"},f={class:"cart__detail__list__item__text__pirce__current--pirce"},v={class:"cart__detail__list__item__text__pirce__original--pirce"},w={class:"cart__detail__list__item__text__num"},D=["onClick"],y=["onClick"],N={class:"cart__content"},S={class:"cart__content__left"},x={class:"cart__content__left__num"},z=o((()=>(0,a._)("div",{class:"cart__content__left__count"},"总计：",-1))),H={class:"cart__content__left__price"},b=o((()=>(0,a._)("div",{class:"cart__content__right"},"去结算",-1)));function L(t,e,_,c,i,o){const L=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)(a.HY,null,[c.cartShow&&"{}"!==JSON.stringify(c.cartItem)?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"mask",onClick:e[0]||(e[0]=()=>{c.handleCartShowChange(c.cartItem)})})):(0,a.kq)("",!0),(0,a._)("div",r,[(0,a._)("div",l,[c.cartShow&&"{}"!==JSON.stringify(c.cartItem)?((0,a.wg)(),(0,a.iD)("div",m,[c.allChecked?((0,a.wg)(),(0,a.iD)("span",{key:0,class:"cart__detail__title__checked iconfont",onClick:e[1]||(e[1]=()=>{c.setAllChecked(c.shopId)})},"  ")):((0,a.wg)(),(0,a.iD)("span",{key:1,class:"cart__detail__title__checked iconfont",onClick:e[2]||(e[2]=()=>{c.setAllChecked(c.shopId)})},"  ")),d,(0,a._)("span",{class:"cart__detail__title__right",onClick:e[3]||(e[3]=()=>{c.clearCart(c.shopId)})},"清空购物车")])):(0,a.kq)("",!0),c.cartShow&&"{}"!==JSON.stringify(c.cartItem)?((0,a.wg)(),(0,a.iD)("div",h,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.cartItem,(t=>((0,a.wg)(),(0,a.iD)("div",{class:"cart__detail__list__item",key:t.id},[t.isChecked?((0,a.wg)(),(0,a.iD)("span",{key:0,onClick:()=>{c.changeItemChecked(c.shopId,t.id)},class:"cart__detail__list__item__checked iconfont"},"  ",8,p)):((0,a.wg)(),(0,a.iD)("span",{key:1,onClick:()=>{c.changeItemChecked(c.shopId,t.id)},class:"cart__detail__list__item__checked iconfont"},"  ",8,u)),(0,a._)("img",{class:"cart__detail__list__item__img",src:t.imgUrl,alt:""},null,8,g),(0,a._)("div",I,[(0,a._)("div",C,(0,n.zw)(t.name),1),(0,a._)("div",k,[(0,a._)("span",f," ￥"+(0,n.zw)(t.promotionPrice),1),(0,a._)("span",v," ￥"+(0,n.zw)(t.originalPrice),1)]),(0,a._)("div",w,[(0,a.wy)((0,a._)("span",{onClick:()=>{c.changeItemNumToCart(c.shopId,_.shopName,t.id,t,-1)},class:"cart__detail__list__item__text__num__minus iconfont"},"  ",8,D),[[s.F8,c.cartData?.[c.shopId]?.itemList?.[t.id]?.["count"]]]),(0,a.wy)((0,a._)("span",{class:"cart__detail__list__item__text__num__number"},(0,n.zw)(c.cartData?.[c.shopId]?.itemList?.[t.id]?.["count"]),513),[[s.F8,c.cartData?.[c.shopId]?.itemList?.[t.id]?.["count"]]]),(0,a._)("span",{onClick:()=>{c.changeItemNumToCart(c.shopId,_.shopName,t.id,t,1)},class:"cart__detail__list__item__text__num__plus iconfont"},"  ",8,y)])])])))),128))])):(0,a.kq)("",!0)]),(0,a._)("div",N,[(0,a._)("div",S,[(0,a._)("img",{onClick:e[4]||(e[4]=()=>{c.handleCartShowChange(c.cartItem)}),src:"https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261637089.png",alt:"",class:"cart__content__left__img"}),(0,a._)("div",x,(0,n.zw)(c.total),1),z,(0,a._)("div",H,"￥"+(0,n.zw)(c.sumPrice),1)]),(0,a.Wm)(L,{to:c.total?{path:`/order/orderConfirmation/${c.shopId}`}:""},{default:(0,a.w5)((()=>[b])),_:1},8,["to"])])])],64)}var T=_(4870),F=_(65),P=_(2483);const j=()=>{const t=(0,F.oR)(),{cartData:e}=(0,T.BK)(t.state),_=(e,_,a,c,i)=>{t.commit("changeItemNumToCart",{shopId:e,shopName:_,itemId:a,itemInfo:c,num:i})},a=(e,_)=>{t.commit("changeItemChecked",{shopId:e,itemId:_})},c=e=>{t.commit("clearCart",{shopId:e})},i=e=>{t.commit("setAllChecked",{shopId:e})};return{cartData:e,changeItemNumToCart:_,changeItemChecked:a,clearCart:c,setAllChecked:i}},U=t=>{const e=(0,F.oR)(),_=(0,P.yj)(),{cartData:c}=e.state,i=_.params.id,n=(0,a.Fl)((()=>{const t=c[i]?.itemList||{};let e=0;if(t)for(const _ in t)t[_].isChecked&&(e+=t[_].count);return e})),s=(0,a.Fl)((()=>{const t=c[i]?.itemList||{};let e=0;if(t)for(const _ in t)t[_].isChecked&&(e+=t[_].count*t[_].promotionPrice);return e.toFixed(2)})),o=(0,a.Fl)((()=>{const e=c[i]?.itemList||{};return"{}"===JSON.stringify(e)&&(t.value=!1),e})),r=(0,a.Fl)((()=>{const t=c[i]?.itemList||{};let e=!0;for(const _ in t)t[_].isChecked||(e=!1);return e}));return{total:n,sumPrice:s,cartItem:o,shopId:i,allChecked:r}},Z=()=>{const t=(0,T.iH)(!1),e=e=>{"{}"!==JSON.stringify(e)&&(t.value=!t.value)};return{cartShow:t,handleCartShowChange:e}};var A={name:"ShopCart",props:["shopName"],setup(){const{cartShow:t,handleCartShowChange:e}=Z(),{total:_,sumPrice:a,cartItem:c,shopId:i,allChecked:n}=U(t),{cartData:s,changeItemNumToCart:o,changeItemChecked:r,clearCart:l,setAllChecked:m}=j();return{total:_,sumPrice:a,cartItem:c,cartData:s,shopId:i,allChecked:n,cartShow:t,handleCartShowChange:e,changeItemNumToCart:o,changeItemChecked:r,clearCart:l,setAllChecked:m}}},Y=_(89);const q=(0,Y.Z)(A,[["render",L],["__scopeId","data-v-3e60d268"]]);var B=q;const J={class:"content"},K={class:"content__left"},O=["onClick"],W={class:"content__right"},$=["src"],R={class:"content__right__item__text"},E={class:"content__right__item__text__title"},G={class:"content__right__item__text__work--off"},M={class:"content__right__item__text__pirce"},Q={class:"content__right__item__text__pirce__current--pirce"},V={class:"content__right__item__text__pirce__original--pirce"},X={class:"content__right__item__text__num"},tt=["onClick"],et=["onClick"];function _t(t,e,_,c,i,o){return(0,a.wg)(),(0,a.iD)("div",J,[(0,a._)("div",K,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.leftItem,(t=>((0,a.wg)(),(0,a.iD)("div",{onClick:e=>c.currentItemName=t.name,key:t.text,class:(0,n.C_)({content__left__item:!0,content__left__item__active:t.name===c.currentItemName})},(0,n.zw)(t.text),11,O)))),128))]),(0,a._)("div",W,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.rightItem,(t=>((0,a.wg)(),(0,a.iD)("div",{class:"content__right__item",key:t.id},[(0,a._)("img",{class:"content__right__item__img",src:t.imgUrl,alt:""},null,8,$),(0,a._)("div",R,[(0,a._)("div",E,(0,n.zw)(t.name),1),(0,a._)("div",G," 月售"+(0,n.zw)(t.sales)+"件 ",1),(0,a._)("div",M,[(0,a._)("span",Q," ￥"+(0,n.zw)(t.promotionPrice),1),(0,a._)("span",V," ￥"+(0,n.zw)(t.originalPrice),1)]),(0,a._)("div",X,[(0,a.wy)((0,a._)("span",{onClick:()=>{c.changeItemNumToCart(c.shopId,_.shopName,t.id,t,-1)},class:"content__right__item__text__num__minus iconfont"},"  ",8,tt),[[s.F8,c.cartData?.[c.shopId]?.itemList?.[t.id]?.["count"]]]),(0,a.wy)((0,a._)("span",{class:"content__right__item__text__num__number"},(0,n.zw)(c.cartData?.[c.shopId]?.itemList?.[t.id]?.["count"]),513),[[s.F8,c.cartData?.[c.shopId]?.itemList?.[t.id]?.["count"]]]),(0,a._)("span",{onClick:()=>{c.changeItemNumToCart(c.shopId,_.shopName,t.id,t,1)},class:"content__right__item__text__num__plus iconfont"},"  ",8,et)])])])))),128))])])}var at=_(4471);const ct=(0,T.iH)("all"),it=()=>{const t=(0,P.yj)(),e=(0,T.iH)([]),_=async()=>{try{const _=await(0,at.U)(`/shop/${t.params.id}/leftItem`);0==_.data.length?console.log("服务器未响应!!!"):e.value=_.data}catch(_){console.log(_)}};return _(),{leftItem:e,currentItemName:ct}},nt=()=>{const t=(0,P.yj)(),e=(0,T.iH)([]),_=t.params.id,c=async(t,_)=>{try{const a=await(0,at.U)(`/shop/${t}/tab/${_}`);"0000"===a.data.code?e.value=a.data.data:console.log("服务器未响应!!!")}catch(a){console.log(a)}};return(0,a.m0)((()=>{c(_,ct.value)})),{rightItem:e,shopId:_}};var st={name:"ShopContent",props:["shopName"],setup(){const{leftItem:t,currentItemName:e}=it(),{rightItem:_,shopId:a}=nt(),{cartData:c,changeItemNumToCart:i}=j();return{leftItem:t,rightItem:_,shopId:a,currentItemName:e,cartData:c,changeItemNumToCart:i}}};const ot=(0,Y.Z)(st,[["render",_t],["__scopeId","data-v-5ea17b22"]]);var rt=ot;const lt=t=>((0,a.dD)("data-v-5b91a8fc"),t=t(),(0,a.Cn)(),t),mt={class:"header"},dt=lt((()=>(0,a._)("div",{class:"header__search"},[(0,a._)("span",{class:"header__search__search-iconfont iconfont"},""),(0,a._)("input",{type:"text",class:"header__search__input",placeholder:"请输入商品名称搜索",name:"",id:""})],-1)));function ht(t,e,_,c,i,n){const s=(0,a.up)("shop-info");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",mt,[(0,a._)("div",{onClick:e[0]||(e[0]=t=>c.router.back()),class:"header__backBtn iconfont"},""),dt]),c.item.imgUrl?((0,a.wg)(),(0,a.j4)(s,{key:0,item:c.item,showBorder:!1},null,8,["item"])):(0,a.kq)("",!0)],64)}var pt=_(1150);const ut=t=>{const e=(0,T.iH)({}),_=(0,P.yj)(),a=async()=>{try{const a=await(0,at.U)("/shop/"+_.params.id);"0000"===a.data.code?(e.value=a.data.data,t.emit("castItem",a.data.data.title)):console.log("服务器没响应!!!")}catch(a){console.log(a)}};return a(),{item:e}};var gt={name:"ShopHeader",components:{ShopInfo:pt.Z},emits:["castItem"],setup(t,e){const _=(0,P.tv)(),{item:a}=ut(e);return{router:_,item:a}}};const It=(0,Y.Z)(gt,[["render",ht],["__scopeId","data-v-5b91a8fc"]]);var Ct=It,kt={name:"Shop",components:{ShopHeader:Ct,ShopContent:rt,ShopCart:B},data(){return{title:""}},methods:{getItem(t){this.title=t}}};const ft=(0,Y.Z)(kt,[["render",i],["__scopeId","data-v-067a5fb1"]]);var vt=ft}}]);
//# sourceMappingURL=28.7a888707.js.map